# スラッシュコマンド

`/` から始まるコマンドで、TUI上の機能を直接呼び出せます。
短い入力で状態を切り替えるための仕組みです。
詳細はこのドキュメントに集約します。

## 使い方

- `/` を押すとコマンド入力モードになります。入力欄は画面下部のスラッシュバーに表示されます。
- `ESC` で入力をキャンセルします。
- `Backspace` で1文字ずつ削除します。`/` まで消えると自動で入力モードを終了します。
- `Enter` で実行します。

## 表示内容

スラッシュバーには次のどちらかが表示されます。

- 1) 候補リスト
- 2) コマンドの短い説明とオプション

候補が出るのは、コマンド名の先頭が入力されているときです。

`/` のみの状態では候補は出ません。

コマンド名が確定していて、引数がまだ無いときは説明とオプションを表示します。

例: `toggle preview | options: show, hide`

## 補完

### `Tab` で候補を確定できます。

最初の候補を採用します。
次の引数をそのまま入力できます。

## 実行結果のフィードバック

実行結果はBottom Barに表示されます。

例: `preview: on | size: ...`

## コマンド一覧

### `/preview`

プレビュー表示の切り替えを行います。

引数:

- `show`: 常に表示にする
- `hide`: 常に非表示にする

引数なしの場合はトグルです。

エラー時はプレビュー領域に理由を表示します。

### `/tab`

タブを一覧表示したり切り替えたりします。

引数:

- なし: 現在のタブ一覧をスラッシュフィードバックとして表示します。アクティブなタブの番号の最後に `*` が付き、例: `tabs: 1:/one 2*:/two` のようにパスと番号が並びます。
- `new`: 現在のディレクトリで新しいタブを作成し、そのタブをアクティブにします。
- `next`: 次のタブに移動します（最後のタブの次は先頭）。
- `prev`: 前のタブに移動します（先頭の前は末尾）。
- `<number>`: そのタブ番号（1 始まり）に切り替えます。範囲外や数値以外の引数はエラーになります。

エラー時は `tab: ...` 形式のメッセージを Bottom Bar に表示します。

### `/shell {command}`

`{command}` に指定したコマンドを実行できます。
実行には、設定の `allow_shell = true` にするか、 `OX_ALLOW_SHELL=true` 環境変数を指定してください

引数:

- `{command}`: 実行するコマンドです。`&&` `;` `|` 区切りなどは一部無効化しています。複雑なコマンドはターミナルアプリをご利用ください。

エラー時/実行結果は `shell: ...` 形式のメッセージを Bottom Bar に表示します。
`Ctrl + O` で、シェル実行の出力内容をプレビューできます。

### `/color {theme}`

タブのテーマカラーの切り替えを行います。作業しているタブが、何のための領域なのか、わかりやすくなります。

引数: 詳細とサンプルは、 [spec](./specs/spec-color-theme-sample.html) をご確認ください。テーマ名を指定することで、指定したテーマに切り替えることができます。

<!--
## コマンド追加時の書き方

新しいコマンドは次の形で追記します。

### `/your-command`

短い説明を書く。

引数:

- `option-a`: 説明
- `option-b`: 説明

実行結果の表示や副作用があればここに書く。
-->

# セルフアップデート機能

`ox` は、GitHub Releases から最新のバイナリを取得し、自身をアップデートする機能を持っています。
手動でバイナリをダウンロードして置き換える手間を省き、コマンド一つで最新の状態に保つことができます。

## 基本的な使い方

以下のコマンドを実行すると、最新の安定版（Stable Release）を確認し、更新がある場合はアップデートを行います。

```bash
ox self-update
```

更新が見つかった場合、変更内容（バージョン）が表示され、実行するかどうかの確認プロンプトが表示されます。
`y` を入力するとダウンロードと置き換えが開始されます。

## オプション

### 特定のバージョンへの変更

特定のバージョン（タグ）を指定してアップデート（またはダウングレード）することができます。

```bash
ox self-update --tag v0.1.0
```

### プレリリース版の利用

開発中のプレリリース版（Prerelease）を含めて最新を探したい場合は、`--prerelease` フラグを使用します。

```bash
ox self-update --prerelease
```

### 確認のスキップ

スクリプトや自動化で利用する場合など、確認プロンプトをスキップして即座に更新するには `--yes` を使用します。

```bash
ox self-update --yes
```

### 証明書検証のスキップ（非推奨）

社内ネットワークやプロキシ環境などで、SSL証明書のエラーが発生する場合、一時的に検証を無効化できます。
**セキュリティリスクがあるため、信頼できるネットワークでのみ使用してください。**

```bash
ox self-update --insecure
```

## ロールバック（復元）

アップデート後に問題が発生した場合、直前のバージョンに戻すことができます。
これはローカルに保存されたバックアップを使用するため、オフラインでも実行可能です。

```bash
ox self-update rollback
```

## 仕組みと安全性

- 検証: GitHub Releases からバイナリと共にチェックサムファイルを取得し、ダウンロードしたファイルの整合性を検証します。
- バックアップ: 更新前に現在の実行ファイルをバックアップします。
